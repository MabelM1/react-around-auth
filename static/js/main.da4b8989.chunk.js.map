{"version":3,"sources":["components/Login.js","components/Register.js","components/ProtectedRoute.js","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/InfoTooltip.js","utils/api.js","utils/auth.js","components/App.js","serviceWorker.js","index.js"],"names":["Login","onLogin","React","useState","email","setEmail","password","setPassword","className","onSubmit","e","preventDefault","type","name","placeholder","value","onChange","target","required","to","Register","onRegister","ProtectedRoute","children","props","loggedIn","Header","option","link","onLogout","url","useLocation","pathname","onClick","Footer","CurrentUserContext","createContext","Card","_id","useContext","card","likes","likesCount","length","cardId","isOwn","owner","cardLikeButtonClassName","some","i","src","alt","onCardClick","onCardDelete","onCardLike","Main","cards","onEditAvatar","onEditProfile","onAddPlace","onDelete","about","avatar","style","backgroundImage","map","data","index","key","userId","onDeleteClick","PopupWithForm","title","isOpen","onClose","buttonText","inputPlaceholder1","inputPlaceholder2","input2Type","disableButton","inputValue1","inputValue2","onInputChange1","onInputChange2","refInput2","popupClass","disableButtonClass","minLength","maxLength","id","pattern","ref","ImagePopup","EditProfilePopup","profileName","setProfileName","description","setDescription","useEffect","editFormProps","onUpdateUser","EditAvatarPopup","onUpdateAvatar","avatarInputRef","reset","useRef","editAvatarProps","current","AddPlacePopup","setTitle","imageLink","setImageLink","addPlaceProps","InfoTooltip","success","message","iconClass","api","baseUrl","headers","this","fetch","method","then","res","ok","json","Promise","reject","status","body","JSON","stringify","LikeState","addLikes","deleteLikes","authorization","auth","response","catch","err","console","log","token","withRouter","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmPopupOpen","setIsConfirmPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCardId","currentUser","setCurrentUser","setCards","setloggedIn","userData","setUserData","localStorage","getItem","setToken","loginSuccess","setLoginSucces","showTooltip","setShowTooltip","history","useHistory","getInitialCards","slice","getContent","push","getProfile","closeAllPopups","confirmProps","handleSubmit","deleteCard","Provider","removeItem","exact","path","isLiked","changeLikeCardStatus","newCard","newCards","c","filter","postCard","profileData","updateProfileData","updateProfileAvatar","signin","setItem","register","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"8QAsDeA,MAnDf,YAA4B,IAAZC,EAAW,EAAXA,QAAW,EACCC,IAAMC,SAAS,IADhB,mBAClBC,EADkB,KACXC,EADW,OAEOH,IAAMC,SAAS,IAFtB,mBAElBG,EAFkB,KAERC,EAFQ,KAoBzB,OACE,yBAAKC,UAAU,SACb,0BAAMA,UAAU,cAAcC,SAVb,SAACC,GACpBA,EAAEC,iBACGP,GAAUE,GAGfL,EAAQG,EAAOE,KAMX,wBAAIE,UAAU,gBAAd,UACA,2BACEA,UAAU,eACVI,KAAK,OACLC,KAAK,QACLC,YAAY,QACZC,MAAOX,EACPY,SA1BkB,SAACN,GACzBL,EAASK,EAAEO,OAAOF,QA0BZG,UAAQ,IAEV,2BACEV,UAAU,eACVI,KAAK,WACLC,KAAK,WACLC,YAAY,WACXC,MAAOT,EACPU,SA/BoB,SAACN,GAC5BH,EAAYG,EAAEO,OAAOF,QA+BfG,UAAQ,IAEV,4BAAQN,KAAK,SAASJ,UAAU,iBAAhC,UACD,uBAAGA,UAAU,kBAAb,oBACC,kBAAC,IAAD,CAAMW,GAAG,UAAUX,UAAU,eAA7B,sBCYOY,MAtDf,YAAkC,IAAfC,EAAc,EAAdA,WAAc,EACLnB,IAAMC,SAAS,IADV,mBACxBC,EADwB,KACjBC,EADiB,OAECH,IAAMC,SAAS,IAFhB,mBAExBG,EAFwB,KAEdC,EAFc,KAsB/B,OACE,yBAAKC,UAAU,SACb,0BAAMA,UAAU,cAAcC,SAXb,SAACC,GACpBA,EAAEC,iBAEGP,GAAUE,GAGfe,EAAWjB,EAAME,KAMb,wBAAIE,UAAU,gBAAd,WACA,2BACEA,UAAU,eACVI,KAAK,OACLC,KAAK,QACLC,YAAY,QACZC,MAAOX,EACPY,SA5BkB,SAACN,GACzBL,EAASK,EAAEO,OAAOF,QA4BZG,UAAQ,IAEV,2BACEV,UAAU,eACVI,KAAK,WACLC,KAAK,WACLC,YAAY,WACXC,MAAOT,EACPU,SAjCoB,SAACN,GAC5BH,EAAYG,EAAEO,OAAOF,QAiCfG,UAAQ,IAEV,4BAAQN,KAAK,SAASJ,UAAU,iBAAhC,WACD,uBAAGA,UAAU,kBAAb,oBACC,kBAAC,IAAD,CAAMW,GAAG,UAAUX,UAAU,eAA7B,qB,QCvCOc,EATQ,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,SAAaC,EAAa,4BAClD,OACE,kBAAC,IAAD,MAEI,kBAAMA,EAAMC,SAAWF,EAAU,kBAAC,IAAD,CAAUJ,GAAG,iBCyBvCO,MA7Bf,YAAmC,IAE7BC,EACAC,EAHWxB,EAAiB,EAAjBA,MAAMyB,EAAW,EAAXA,SACfC,EAAMC,cAAcC,SAe1B,MAXY,YAARF,GACFH,EAAS,UACTC,EAAO,WACU,YAARE,GACTH,EAAS,SACTC,EAAO,WACU,MAARE,IACTH,EAAS,UACTC,EAAO,WAIP,4BAAQpB,UAAU,UAChB,yBAAKA,UAAU,SACf,yBAAKA,UAAU,4BACb,uBAAGA,UAAU,iBAAiBJ,GAC9B,uBAAGI,UAAU,kBACb,kBAAC,IAAD,CAAMW,GAAIS,EAAMpB,UAAU,cAAcyB,QAASJ,GAAjD,IAA8DF,OCfvDO,MARf,WACE,OACE,4BAAQ1B,UAAU,UAChB,uBAAGA,UAAU,qBAAb,+BCHO2B,EAAqBjC,IAAMkC,gBCyCzBC,MAvCf,SAAcb,GAAQ,IACZc,EAAOpC,IAAMqC,WAAWJ,GAAxBG,IADW,EAEId,EAAMgB,KAArBZ,EAFW,EAEXA,KAAMf,EAFK,EAELA,KAGR4B,EAAQjB,EAAMgB,KAAKC,MACnBC,EAAaD,EAAME,OACnBC,EAASpB,EAAMgB,KAAKF,IACpBO,EAAQrB,EAAMgB,KAAKM,MAAMR,MAAQA,EAEjCS,EADUN,EAAMO,MAAK,SAAAC,GAAC,OAAIA,EAAEX,MAAQA,KACA,gCAAiC,cAc3E,OACE,oCACE,yBAAK9B,UAAU,eAAe0C,IAAKtB,EAAMuB,IAAKtC,EAAMoB,QAdxD,WACET,EAAM4B,YAAY5B,EAAMgB,SAcrBK,EAAQ,yBAAKrC,UAAU,gBAAgByB,QAXlB,WACxBT,EAAM6B,aAAaT,MAU4D,KAC7E,yBAAKpC,UAAU,eACb,wBAAIA,UAAU,eAAeK,GAC7B,yBAAKL,UAAU,yBACb,yBAAKA,UAAWuC,EAAyBd,QAXzB,WACtBT,EAAM8B,WAAW9B,EAAMgB,SAWjB,0BAAMhC,UAAU,sBAAsBkC,OCwBjCa,MAxDf,YASI,IARFC,EAQC,EARDA,MACAC,EAOC,EAPDA,aACAC,EAMC,EANDA,cACAC,EAKC,EALDA,WACAP,EAIC,EAJDA,YACAQ,EAGC,EAHDA,SACAN,EAEC,EAFDA,WACAD,EACC,EADDA,aACC,EACoCnD,IAAMqC,WAAWJ,GAA9CtB,EADP,EACOA,KAAMgD,EADb,EACaA,MAAOC,EADpB,EACoBA,OAAQxB,EAD5B,EAC4BA,IAE7B,OACE,0BAAM9B,UAAU,QACd,6BAASA,UAAU,WACjB,yBAAKA,UAAU,qBACb,yBACEA,UAAU,SACVuD,MAAO,CAAEC,gBAAgB,OAAD,OAASF,EAAT,QAE1B,yBAAKtD,UAAU,WACb,yBAAKA,UAAU,OAAOyB,QAASwB,MAGnC,yBAAKjD,UAAU,iBACb,wBAAIA,UAAU,iBAAiBK,GAC/B,4BACEL,UAAU,qBACVyB,QAASyB,IAEX,uBAAGlD,UAAU,kBAAkBqD,IAEjC,4BAAQrD,UAAU,oBAAoByB,QAAS0B,KAEjD,6BAASnD,UAAU,aACjB,wBAAIA,UAAU,UACXgD,EAAMS,KAAI,SAACC,EAAMC,GAChB,OACE,wBAAI3D,UAAU,QAAQ4D,IAAKD,GACzB,kBAAC,EAAD,CACE3B,KAAM0B,EACNG,OAAQ/B,EACRc,YAAaA,EACbkB,cAAeV,EACfN,WAAYA,EACZD,aAAcA,YCejBkB,MA9Df,YAGwD,IAH/BC,EAG8B,EAH9BA,MAAM3D,EAGwB,EAHxBA,KAAM4D,EAGkB,EAHlBA,OAAOC,EAGW,EAHXA,QAAQC,EAGG,EAHHA,WAClDC,EAEqD,EAFrDA,kBAAkBC,EAEmC,EAFnCA,kBAAkBC,EAEiB,EAFjBA,WAAWC,EAEM,EAFNA,cAC/CC,EACqD,EADrDA,YAAaC,EACwC,EADxCA,YACbC,EAAqD,EAArDA,eAAgBC,EAAqC,EAArCA,eAAe1E,EAAsB,EAAtBA,SAAU2E,EAAY,EAAZA,UAEjCC,EAAaZ,EAAM,2BACL5D,EADK,4CAELA,GAEhByE,EAAqBP,EAAa,uDAQxC,OACE,6BACE,2BAAOvE,UAAW6E,GAChB,yBAAK7E,UAAU,oBACb,0BAAMA,UAAU,cAAcC,SATjB,SAACC,GACpBD,EAASC,GACTgE,MAQQ,wBAAIlE,UAAU,gBAAgBgE,GAC7BI,GAAqB,2BACpBpE,UAAU,2BACVI,KAAK,OACLC,KAAK,QACLC,YAAa8D,EACbW,UAAU,IACVC,UAAU,KACVzE,MAAOiE,EACPhE,SAAUkE,EACVhE,UAAQ,IAEV,0BACEuE,GAAG,qBACHjF,UAAU,4BAEXqE,GAAqB,2BACpBrE,UAAU,4BACVI,KAAMkE,EACNjE,KAAK,OACLC,YAAa+D,EACba,QAAwB,SAAfZ,EAAuB,cAAc,KAC9C/D,MAAOkE,EACPU,IAAKP,EACLpE,SAAUmE,EACVjE,UAAQ,IAEV,0BACEuE,GAAG,oBACHjF,UAAU,4BAEZ,4BAAQI,KAAK,SAASJ,UAAW8E,GAAqBX,GACtD,4BAAQnE,UAAU,cAAcyB,QAASyC,SCjCtCkB,MArBf,SAAoBpE,GAAQ,IACnBgB,EAAwBhB,EAAxBgB,KAAMiC,EAAkBjD,EAAlBiD,OAAOC,EAAWlD,EAAXkD,QAEdW,EAAaZ,EAAM,2EAKzB,OACE,2BAAOjE,UAAW6E,GAChB,yBAAK7E,UAAU,oBACb,4BAAQA,UAAU,uBAChB,4BAAQA,UAAU,cAAcyB,QAASyC,IACzC,yBAAKlE,UAAU,eAAe2C,IAAI,SAASD,IAAKV,EAAKZ,OACrD,gCAAYpB,UAAU,sBAAsBgC,EAAK3B,UCyC5CgF,MArDf,SAA0BrE,GAAQ,IAAD,EACTtB,IAAMqC,WAAWJ,GAAhCtB,EADwB,EACxBA,KAAMgD,EADkB,EAClBA,MADkB,EAEO3D,IAAMC,SAAS,IAFtB,mBAExB2F,EAFwB,KAEXC,EAFW,OAGO7F,IAAMC,SAAS,IAHtB,mBAGxB6F,EAHwB,KAGXC,EAHW,KAK/B/F,IAAMgG,WAAU,WACVrF,GAAQgD,IACVkC,EAAelF,GACfoF,EAAepC,MAEhB,CAAChD,EAAKgD,IAmBT,IAAMsC,EAAgB,CACpB3B,MAAO,eACP3D,KAAM,OACN+D,kBAAmB,OACnBC,kBAAmB,WACnBC,WAAW,OACXL,OAAQjD,EAAMiD,OACdC,QAASlD,EAAMkD,QACfC,WAAY,OACZI,eAAe,EACfC,YAAac,EACbb,YAAae,EACbvF,SArBF,SAAsBC,GACpBA,EAAEC,iBAEFa,EAAM4E,aAAa,CACjBvF,KAAMiF,EACNjC,MAAOmC,KAiBTd,eA9B0B,SAACxE,GAC3BqF,EAAerF,EAAEO,OAAOF,QA8BxBoE,eA3B8B,SAACzE,GAC/BuF,EAAevF,EAAEO,OAAOF,SA6B1B,OACE,oCACE,kBAAC,EAAkBoF,KChBVE,MAjCf,YAAsE,IAA3C5B,EAA0C,EAA1CA,OAAQC,EAAkC,EAAlCA,QAAS4B,EAAyB,EAAzBA,eACpCC,GAD6D,EAATC,MACnCtG,IAAMuG,OAAO,KAE9BC,EAAkB,CACtBlC,MAAO,yBACP3D,KAAM,kBACNgE,kBAAmB,aACnBC,WAAY,OACZL,OAAQA,EACRC,QAASA,EACTC,WAAY,OACZI,eAAe,EACftE,SAIF,SAAsBC,GACpBA,EAAEC,iBAEF2F,EAAe,CACbxC,OAAQyC,EAAeI,QAAQ5F,QAGjCL,EAAEO,OAAOuF,SAVTpB,UAAWmB,GAab,OACE,oCACE,kBAAC,EAAkBG,KCgBVE,MA5Cf,YAAwD,IAA/BnC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,QAASf,EAAa,EAAbA,WAAa,EAC3BzD,IAAMC,SAAS,IADY,mBAC9CqE,EAD8C,KACvCqC,EADuC,OAEnB3G,IAAMC,SAAS,IAFI,mBAE9C2G,EAF8C,KAEnCC,EAFmC,KAsB/CC,EAAgB,CACpBxC,MAAO,YACP3D,KAAM,YACN+D,kBAAmB,QACnBC,kBAAmB,aACnBC,WAAW,OACXL,OAAQA,EACRC,QAASA,EACTC,WAAY,SACZI,eAAe,EACftE,SA5BmB,SAACC,GACpBA,EAAEC,iBAEFgD,EAAW,CACT9C,KAAM2D,EACN5C,KAAMkF,IAERpG,EAAEO,OAAOuF,SAsBTtB,eAnBwB,SAACxE,GACzBmG,EAASnG,EAAEO,OAAOF,QAmBlBoE,eAhBwB,SAACzE,GACzBqG,EAAarG,EAAEO,OAAOF,SAkBxB,OACE,oCACE,kBAAC,EAAkBiG,KCbVC,MA3Bf,YAAiD,IAA3BxC,EAA0B,EAA1BA,OAAQyC,EAAkB,EAAlBA,QAAQxC,EAAU,EAAVA,QAC9BW,EAAaZ,EAAM,2DAInB0C,EAAUD,EAAO,6FAKjBE,EAAYF,EAAO,oDAIzB,OACE,2BAAO1G,UAAW6E,GAChB,yBAAK7E,UAAU,oBACf,0BAAMA,UAAU,gBACd,yBAAKA,UAAW4G,IAChB,wBAAI5G,UAAU,gBAAgB2G,GAC9B,4BAAQ3G,UAAU,cAAcyB,QAASyC,Q,gBC6GlC2C,EAAM,I,WAlIjB,cAAgC,IAAnBC,EAAkB,EAAlBA,QAAQC,EAAU,EAAVA,QAAU,oBAC7BC,KAAKF,QAAUA,EACfE,KAAKD,QAAUA,E,8DAIf,OAAOE,MAAM,GAAD,OAAID,KAAKF,QAAT,UAA0B,CACpCI,OAAQ,MACRH,QAASC,KAAKD,UAEfI,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,mCAKtC,OAAOR,MAAM,GAAD,OAAID,KAAKF,QAAT,aAA6B,CACvCI,OAAQ,MACRH,QAASC,KAAKD,UAEfI,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,0CAIpBnE,GAClB,OAAO2D,MAAM,GAAD,OAAID,KAAKF,QAAT,oBAAoC,CAC9CI,OAAQ,QACRH,QAASC,KAAKD,QACdW,KAAMC,KAAKC,UAAU,CACnBtE,aAGH6D,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,2CAIP,IAAdpH,EAAa,EAAbA,KAAKgD,EAAQ,EAARA,MACtB,OAAO4D,MAAM,GAAD,OAAID,KAAKF,QAAT,aAA6B,CACvCI,OAAQ,QACRH,QAASC,KAAKD,QACdW,KAAMC,KAAKC,UAAU,CACnBvH,OACAgD,YAGH8D,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,kCAIjB,IAAbpH,EAAY,EAAZA,KAAKe,EAAO,EAAPA,KACb,OAAO6F,MAAM,GAAD,OAAID,KAAKF,QAAT,UAA0B,CACpCI,OAAQ,OACRH,QAASC,KAAKD,QACdW,KAAMC,KAAKC,UAAU,CACnBvH,OACAe,WAGH+F,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,iCAI7BrF,GACT,OAAO6E,MAAM,GAAD,OAAID,KAAKF,QAAT,kBAA0B1E,GAAU,CAC9C8E,OAAQ,SACRH,QAASC,KAAKD,UAEfI,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,+BAI/BrF,GACP,OAAO6E,MAAM,GAAD,OAAID,KAAKF,QAAT,wBAAgC1E,GAAU,CACpD8E,OAAQ,MACRH,QAASC,KAAKD,UAEfI,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,kCAI5BrF,GACV,OAAO6E,MAAM,GAAD,OAAID,KAAKF,QAAT,wBAAgC1E,GAAU,CACpD8E,OAAQ,SACRH,QAASC,KAAKD,UAEfI,MAAK,SAACC,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,iBAAyBJ,EAAIK,c,2CAKnBrF,EAAQyF,GAC1B,OAAIA,EACKb,KAAKc,SAAS1F,GAEf4E,KAAKe,YAAY3F,O,KAKX,CAAQ,CACzB0E,QAAS,6CACTC,QAAS,CACPiB,cAAe,uCACf,eAAgB,sBC9DPC,EAAO,I,WAxElB,cAAgC,IAAnBnB,EAAkB,EAAlBA,QAAQC,EAAU,EAAVA,QAAU,oBAC7BC,KAAKF,QAAUA,EACfE,KAAKD,QAAUA,E,qDAGRnH,EAAOE,GACd,OAAOmH,MAAM,GAAD,OAAID,KAAKF,QAAT,WAA2B,CACrCI,OAAQ,OACRH,QAASC,KAAKD,QACdW,KAAMC,KAAKC,UAAU,CAAChI,QAAOE,eAE9BqH,MAAK,SAACe,GACL,IACE,GAAwB,MAApBA,EAAST,OACX,OAAOS,EAASZ,OAElB,MAAMpH,GACJ,OAAQA,MAGbiH,MAAK,SAACC,GACL,OAAOA,KAERe,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,6BAGvBxI,EAAOE,GACZ,OAAOmH,MAAM,GAAD,OAAID,KAAKF,QAAT,WAA2B,CACrCI,OAAQ,OACRH,QAASC,KAAKD,QACdW,KAAMC,KAAKC,UAAU,CAAChI,QAAOE,eAE9BqH,MAAK,SAACe,GACL,IACE,GAAwB,MAApBA,EAAST,OACX,OAAOS,EAASZ,OAElB,MAAMpH,GACJ,OAAQA,MAGbiH,MAAK,SAACC,GACL,OAAIA,EAAImB,MACCnB,EAEAG,QAAQC,OAAR,iBAAyBJ,EAAIK,YAGvCU,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,Q,iCAGnBG,GACT,OAAOtB,MAAM,GAAD,OAAID,KAAKF,QAAT,aAA6B,CACvCI,OAAQ,MACRH,QAAQ,2BAAKC,KAAKD,SAAX,IAAoB,+BAA4BwB,OAExDpB,MAAK,SAACe,GACL,IACE,GAAwB,MAApBA,EAAST,OACX,OAAOS,EAASZ,OAElB,MAAMpH,GACJ,OAAQA,MAGbiH,MAAK,SAACC,GACL,OAAOA,KAERe,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,U,KAIZ,CAAS,CAC3BtB,QAAS,oCACTC,QAAS,CACP,eAAgB,mBAChB,OAAS,sBCwNCyB,mBA7QhB,WAAgB,IAAD,EAE+C9I,IAAMC,UAChE,GAHW,mBAEN8I,EAFM,KAEkBC,EAFlB,OAKyChJ,IAAMC,UAAS,GALxD,mBAKNgJ,EALM,KAKeC,EALf,OAM6ClJ,IAAMC,UAC9D,GAPW,mBAMNkJ,EANM,KAMiBC,EANjB,OASuCpJ,IAAMC,UAAS,GATtD,mBASNoJ,EATM,KAScC,EATd,OAUmCtJ,IAAMC,UAAS,GAVlD,mBAUNsJ,EAVM,KAUYC,EAVZ,OAW2BxJ,IAAMC,WAXjC,mBAWNwJ,EAXM,KAWQC,EAXR,OAYe1J,IAAMC,WAZrB,mBAYNyC,EAZM,KAYEiH,EAZF,OAayB3J,IAAMC,SAAS,IAbxC,mBAaN2J,EAbM,KAaOC,EAbP,OAca7J,IAAMC,SAAS,IAd5B,mBAcNqD,GAdM,KAcCwG,GAdD,QAemB9J,IAAMC,UAAS,GAflC,qBAeNsB,GAfM,MAeIwI,GAfJ,SAgBmB/J,IAAMC,SAAS,CAAC+D,KAAK,KAhBxC,qBAgBNgG,GAhBM,MAgBIC,GAhBJ,SAiBajK,IAAMC,SAASiK,aAAaC,QAAQ,UAjBjD,qBAiBNtB,GAjBM,MAiBCuB,GAjBD,SAkB0BpK,IAAMC,UAAS,GAlBzC,qBAkBNoK,GAlBM,MAkBQC,GAlBR,SAmByBtK,IAAMC,UAAS,GAnBxC,qBAmBNsK,GAnBM,MAmBOC,GAnBP,MAoBTC,GAAUC,cAId1K,IAAMgG,WAAU,WACdmB,EACGwD,kBACAlD,MAAK,SAACC,GACLoC,GAASpC,EAAIkD,MAAM,EAAG,OAEvBnC,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAEf,IAGH1I,IAAMgG,WAAU,WACV6C,IACFN,EAAKsC,WAAWhC,IACfpB,MAAK,SAACC,GACL,GAAIA,EAAK,CACP,IAAM1D,EAAO,CACXuB,GAAImC,EAAI1D,KAAK5B,IACblC,MAAOwH,EAAI1D,KAAK9D,OAElB6J,IAAY,GACZE,GAAY,2BAAID,IAAL,IAAchG,UAEzByG,GAAQK,KAAK,SAGhBrC,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIf,CAACG,KAEJ7I,IAAMgG,WAAU,WACdmB,EACG4D,aACAtD,MAAK,SAACC,GACLmC,EAAenC,MAEhBe,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAEf,IAEH,IA+CMsC,GAAiB,WACrB9B,GAAuB,GACvBF,GAA0B,GAC1BI,GAAyB,GACzBE,GAAsB,GACtBI,EAAgB,MAChBF,GAAoB,GACpBgB,IAAe,IAgFXS,GAAe,CACnB3G,MAAO,gBACP3D,KAAM,UACN4D,OAAQ8E,EACR7E,QAASwG,GACTvG,WAAY,MACZI,eAAe,EACfqG,aAvDiB,SAAC1K,GAClBA,EAAEC,iBAEF0G,EACGgE,WAAWzI,GACX+E,MAAK,SAACC,GACLiC,EAAU,SAEXlB,OAAM,SAACC,GACNC,QAAQC,IAAIF,MAGhBsC,OA8CF,OACE,kBAAC/I,EAAmBmJ,SAApB,CAA6BvK,MAAO+I,GAChC,kBAAC,EAAD,CAAQ1J,MAAO8J,GAAShG,KAAK9D,MAAOyB,SAnBrB,WACnBoI,IAAY,GACZE,GAAY,CAACjG,KAAK,KAClBkG,aAAamB,WAAW,SACxBZ,GAAQK,KAAK,cAgBT,kBAAC,IAAD,KACE,kBAAC,EAAD,CAAgBQ,OAAK,EAACC,KAAK,IAAIhK,SAAUA,IACvC,kBAAC,EAAD,CACE+B,MAAOA,GACPG,WA7HgB,SAACjD,GAC3B0I,GAAwBD,IA6HdzF,cAtHmB,WAC7BwF,GAA0B,IAsHhBzF,aA3HkB,SAAC/C,GAC7B4I,GAAyB,IA2Hf1F,SApHc,SAAChB,GACzB4G,GAAsB,GACtBK,EAAUjH,IAmHAQ,YAhHY,SAACZ,GACvBoH,EAAgBpH,GAChBkH,GAAoB,IA+GVpG,WA5JW,SAACd,GACtB,IAAMkJ,EAAUlJ,EAAKC,MAAMO,MAAK,SAACC,GAAD,OAAOA,EAAEX,MAAQwH,EAAYxH,OAE7D+E,EACGsE,qBAAqBnJ,EAAKF,KAAMoJ,GAChC/D,MAAK,SAACiE,GACL,IAAMC,EAAWrI,GAAMS,KAAI,SAAC6H,GAAD,OAAQA,EAAExJ,MAAQE,EAAKF,IAAMsJ,EAAUE,KAClE9B,GAAS6B,MAEVlD,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAmJNvF,aA/Ia,SAACT,GACxByE,EACGgE,WAAWzI,GACX+E,MAAK,SAACC,GACL,IAAMiE,EAAWrI,GAAMuI,QAAO,SAACD,GAAD,OAAQA,EAAExJ,MAAQM,EAASkJ,EAAI,QAC7D9B,GAAS6B,MAEVlD,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAyIR,kBAAC,EAAD,MAEA,kBAAC,EAAD,CACEnE,OAAQ0E,EACRzE,QAASwG,GACTvH,WA3GW,SAACO,GACtBmD,EACG2E,SAAS9H,GACTyD,MAAK,SAACiE,GACL5B,GAAS,GAAD,mBAAKxG,IAAL,CAAYoI,QAErBjD,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAsGR,kBAAC,EAAD,CACEnE,OAAQwE,EACRvE,QAASwG,GACT9E,aArGa,SAAC6F,GACxB5E,EACG6E,kBAAkBD,GAClBtE,MAAK,SAACC,GAAD,OAASmC,EAAenC,MAC7Be,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAkGR,kBAAC,EAAD,CACEnE,OAAQ4E,EACR3E,QAASwG,GACT5E,eAjGe,SAACpC,GAC1BmD,EACG8E,oBAAoBjI,EAAKJ,QACzB6D,MAAK,SAACC,GAAD,OAASmC,EAAenC,MAC7Be,OAAM,SAACC,GACNC,QAAQC,IAAIF,SA8FR,kBAAC,EAAkBuC,IAClBxB,GACC,kBAAC,EAAD,CACEnH,KAAMmH,EACNjF,QAASwG,GACTzG,OAAQgF,KAId,kBAAC,IAAD,CAAOgC,KAAK,WACR,kBAAC,EAAD,CAAOxL,QArFC,SAACG,EAAOE,GAC1BmI,EAAK2D,OAAOhM,EAAOE,GAClBqH,MAAK,SAACC,GACFA,IACDwC,aAAaiC,QAAQ,QAASzE,EAAImB,OAClCuB,GAAS1C,EAAImB,OACbkB,IAAY,GACZU,GAAQK,KAAK,aAgFX,kBAAC,IAAD,CAAOS,KAAK,WACV,kBAAC,EAAD,CAAWpK,WA5EE,SAACjB,EAAME,GAC5BmI,EAAK6D,SAASlM,EAAOE,GACpBqH,MAAK,SAACC,GACFA,GACD4C,IAAe,GACfE,IAAe,GACdC,GAAQK,KAAK,aAEdR,IAAe,GACfE,IAAe,WAqEb,kBAAC,IAAD,KACGjJ,GAAW,kBAAC,IAAD,CAAUN,GAAG,MAAS,kBAAC,IAAD,CAAUA,GAAG,cAGpD,kBAAC,EAAD,CAAasD,OAAQgG,GAAavD,QAASqD,GAAc7F,QAASwG,SCpRrDqB,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCPNC,IAASC,OACP,kBAAC,IAAD,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SDoHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBvF,MAAK,SAAAwF,GACJA,EAAaC,gBAEdzE,OAAM,SAAA0E,GACLxE,QAAQwE,MAAMA,EAAMlG,c","file":"static/js/main.da4b8989.chunk.js","sourcesContent":["import React from \"react\";\nimport {Link} from 'react-router-dom';\n\nfunction Login({onLogin }) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n \n  const handleEmailChange = (e) => {\n    setEmail(e.target.value)\n  }\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value)\n  }\n\n  const handleSubmit = (e ) => {\n    e.preventDefault()\n    if (!email || !password) {\n      return;\n    }\n    onLogin(email, password)\n  }\n\n  return (\n    <div className=\"login\">\n      <form className=\"login__form\" onSubmit={handleSubmit}>\n        <h2 className=\"login__title\">Log In</h2>\n        <input\n          className=\"login__input\"\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={handleEmailChange}\n          required\n        />   \n        <input\n          className=\"login__input\"\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n           value={password  }\n           onChange={handlePasswordChange}\n          required\n        />\n        <button type=\"submit\" className=\"login__button\">Log In</button>\n       <p className=\"login__message\">Not a member yet?\n        <Link to=\"/signup\" className=\"login__link\"> Sign up here!</Link>\n      </p>\n      </form>\n    </div>   \n  );\n}\n\nexport default Login;","import React from \"react\";\nimport {\n  Link,\n} from 'react-router-dom';\n\nfunction Register({onRegister }) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n \n  const handleEmailChange = (e) => {\n    setEmail(e.target.value)\n  }\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value)\n  }\n\n\n  const handleSubmit = (e ) => {\n    e.preventDefault()\n\n    if (!email || !password) {\n      return;\n    }\n    onRegister(email,password) \n  }\n\n  return (\n    <div className=\"login\">\n      <form className=\"login__form\" onSubmit={handleSubmit}>\n        <h2 className=\"login__title\">Sign Up</h2>\n        <input\n          className=\"login__input\"\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Email\"\n          value={email }\n          onChange={handleEmailChange}\n          required\n        />   \n        <input\n          className=\"login__input\"\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n           value={password  }\n           onChange={handlePasswordChange}\n          required\n        />\n        <button type=\"submit\" className=\"login__button\">Sign up</button>\n       <p className=\"login__message\">Already a member?\n        <Link to=\"/signin\" className=\"login__link\"> Log in here!</Link>\n      </p>\n      </form>\n      \n    </div>   \n  );\n}\n\nexport default Register;","import React from \"react\";\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ children, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? children: <Redirect to='./signin' />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute; \n\n","import React from 'react';\nimport { useLocation,Link } from 'react-router-dom'\n\nfunction Header({email,onLogout}) {\n  const url = useLocation().pathname\n  let option; \n  let link;\n\n  if (url === \"/signin\") {\n    option = \"Sign up\";\n    link = \"/signup\"\n  } else if (url === \"/signup\") {\n    option = \"Log in\";\n    link = \"/signin\"\n  } else if (url === \"/\")  {\n    option = 'Log out'\n    link = \"/signin\"\n  }\n\n  return (\n    <header className=\"header\">\n      <div className=\"logo\"></div>\n      <div className=\"header__option-container\">\n        <p className=\"header__email\">{email}</p>\n        <p className=\"header__option\"> \n        <Link to={link} className=\"login__link\" onClick={onLogout} > {option}</Link>\n         </p>\n      </div>  \n    </header>\n  )\n}\n\nexport default Header;","import React from \"react\";\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">© 2020 Around The U.S.</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\n\n\nfunction Card(props) {\n  const { _id} = React.useContext(CurrentUserContext);\n  const { link, name } = props.card;\n  //const cardOwnerId = props.card.owner._id;\n   // const userId = _id\n  const likes = props.card.likes;\n  const likesCount = likes.length;\n  const cardId = props.card._id\n  const isOwn = props.card.owner._id === _id;\n  const isLiked = likes.some(i => i._id === _id);\n  const cardLikeButtonClassName = isLiked ? 'place__icon place__icon_liked': 'place__icon';\n  \n  function handleImageClick() {\n    props.onCardClick(props.card);\n  }\n\n  const handleDeleteClick = () => {\n    props.onCardDelete(cardId)\n  }\n\n  const handleLikeClick = () => {\n    props.onCardLike(props.card)\n  }\n\n  return (\n    <>\n      <img className=\"place__image\" src={link} alt={name} onClick={handleImageClick}/>\n      {isOwn ? <div className=\"place__delete\" onClick={handleDeleteClick}></div> : null}\n      <div className=\"place__info\">\n        <h3 className=\"place__name\">{name}</h3>\n        <div className=\"place__icon-container\">\n          <div className={cardLikeButtonClassName} onClick={handleLikeClick}></div>\n          <span className=\"place__likes-count\">{likesCount}</span>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Card;\n","import React from \"react\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Main({\n  cards,\n  onEditAvatar,\n  onEditProfile,\n  onAddPlace,\n  onCardClick,\n  onDelete,\n  onCardLike,\n  onCardDelete,\n}) {\n  const { name, about, avatar, _id } = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"main\">\n      <section className=\"profile\">\n        <div className=\"overlay-container\">\n          <div\n            className=\"avatar\"\n            style={{ backgroundImage: `url(${avatar})` }}\n          ></div>\n          <div className=\"overlay\">\n            <div className=\"edit\" onClick={onEditAvatar}></div>\n          </div>\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{name}</h1>\n          <button\n            className=\"button button_edit\"\n            onClick={onEditProfile}\n          ></button>\n          <p className=\"profile__title\">{about}</p>\n        </div>\n        <button className=\"button button_add\" onClick={onAddPlace}></button>\n      </section>\n      <section className=\"container\">\n        <ul className=\"places\">\n          {cards.map((data, index) => {\n            return (\n              <li className=\"place\" key={index}>\n                <Card\n                  card={data}\n                  userId={_id}\n                  onCardClick={onCardClick}\n                  onDeleteClick={onDelete}\n                  onCardLike={onCardLike}\n                  onCardDelete={onCardDelete}\n                />\n              </li>\n            );\n          })}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\n\nfunction PopupWithForm({ title,name, isOpen,onClose,buttonText,\n  inputPlaceholder1,inputPlaceholder2,input2Type,disableButton,\n  inputValue1, inputValue2, \n  onInputChange1, onInputChange2,onSubmit, refInput2}) {\n  \n    const popupClass = isOpen ? \n    `popup popup_type_${name} popup_opened` :\n    `popup popup_type_${name}`\n\n  const disableButtonClass = disableButton ? `popup__button popup__button_disabled`:\n  `popup__button`\n\n  const handleSubmit = (e) => {\n    onSubmit(e)\n    onClose()\n  }\n\n  return (\n    <div>\n      <aside className={popupClass}>\n        <div className=\"popup__container\">\n          <form className=\"popup__form\" onSubmit={handleSubmit}>\n            <h2 className=\"popup__title\">{title}</h2>\n            {inputPlaceholder1 && <input\n              className=\"popup__input popup__name\"\n              type=\"text\"\n              name=\"title\"\n              placeholder={inputPlaceholder1}\n              minLength=\"1\"\n              maxLength=\"30\"\n              value={inputValue1 }\n              onChange={onInputChange1}\n              required\n            />}\n            <span\n              id=\"popup__title-error\"\n              className=\"popup__input_type_error\"\n            ></span>\n            {inputPlaceholder2 && <input\n              className=\"popup__input popup__about\"\n              type={input2Type}\n              name=\"link\"\n              placeholder={inputPlaceholder2}\n              pattern={input2Type === \"link\"? \"https?://.+\":null}\n              value={inputValue2  }\n              ref={refInput2}\n              onChange={onInputChange2}\n              required\n            />}\n            <span\n              id=\"popup__link-error\"\n              className=\"popup__input_type_error\"\n            ></span>\n            <button type=\"submit\" className={disableButtonClass}>{buttonText}</button>\n            <button className=\"popup__exit\" onClick={onClose}></button>\n          </form>\n        </div>\n      </aside> \n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\n\nfunction ImagePopup(props) {\n  const {card, isOpen,onClose} = props\n\n  const popupClass = isOpen ? \n  `popup popup_type_large-image popup_opened` :\n  `popup popup_type_large-image`\n\n\n  return (\n    <aside className={popupClass}>\n      <div className=\"popup__container\">\n        <figure className=\"popup__image-figure\">\n          <button className=\"popup__exit\" onClick={onClose}></button>\n          <img className=\"popup__image\" alt=\"figure\" src={card.link}/>\n          <figcaption className=\"popup__image-title\">{card.name}</figcaption>\n        </figure>\n      </div>\n    </aside>\n  );\n}\n\nexport default ImagePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\n\nfunction EditProfilePopup(props) {\n  const {name, about} = React.useContext(CurrentUserContext);\n  const [profileName, setProfileName] = React.useState(\"\")\n  const [description, setDescription] = React.useState(\"\")\n\n  React.useEffect(() => {\n    if (name && about) {\n      setProfileName(name);\n      setDescription(about);\n    } \n  }, [name,about]);\n\n  const handleProfileChange = (e) => {\n    setProfileName(e.target.value)\n  }\n\n  const handleDescriptionChange = (e) => {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n  \n    props.onUpdateUser({\n      name: profileName,\n      about: description,\n    });  \n  }\n\n  const editFormProps = {\n    title: \"Edit Profile\",\n    name: \"edit\",\n    inputPlaceholder1: \"Name\",\n    inputPlaceholder2: \"About Me\",\n    input2Type:\"text\",\n    isOpen: props.isOpen,\n    onClose: props.onClose,\n    buttonText: \"Save\",\n    disableButton: false,\n    inputValue1: profileName,\n    inputValue2: description,\n    onSubmit: handleSubmit,\n    onInputChange1: handleProfileChange ,\n    onInputChange2: handleDescriptionChange \n  };\n\n  return (\n    <>\n      <PopupWithForm {...editFormProps} />\n    </>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, reset }) {\n  const avatarInputRef = React.useRef(\"\");\n\n  const editAvatarProps = {\n    title: \"Change profile picture\",\n    name: \"profile-picture\",\n    inputPlaceholder2: \"Image link\",\n    input2Type: \"link\",\n    isOpen: isOpen,\n    onClose: onClose,\n    buttonText: \"Save\",\n    disableButton: false,\n    onSubmit: handleSubmit,\n    refInput2: avatarInputRef,\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: avatarInputRef.current.value,\n    });\n\n    e.target.reset();\n  }\n\n  return (\n    <>\n      <PopupWithForm {...editAvatarProps} />\n    </>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace}) {\n  const [title, setTitle] = React.useState(\"\");\n  const [imageLink, setImageLink] = React.useState(\"\");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onAddPlace({\n      name: title,\n      link: imageLink,\n    });\n    e.target.reset();\n  };\n\n  const handleTitleChange = (e) => {\n    setTitle(e.target.value);\n  }\n\n  const handleImageChange = (e) => {\n    setImageLink(e.target.value);\n  }\n\n  const addPlaceProps = {\n    title: \"New Place\",\n    name: \"add-place\",\n    inputPlaceholder1: \"Title\",\n    inputPlaceholder2: \"Image link\",\n    input2Type:\"link\",\n    isOpen: isOpen,\n    onClose: onClose,\n    buttonText: \"Create\",\n    disableButton: false,\n    onSubmit: handleSubmit,\n    onInputChange1: handleTitleChange,\n    onInputChange2: handleImageChange\n  };\n\n  return (\n    <>\n      <PopupWithForm {...addPlaceProps} />\n    </>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from \"react\";\n\nfunction InfoTooltip({isOpen, success,onClose}) {\n  const popupClass = isOpen ? \n  `popup popup__tooltip popup_opened` :\n  `popup popup__tooltip`\n\n  const message = success ? \n  `Success! You have now been registered.` :\n  `Oops, something went wrong!\n   Please try again.`\n\n  const iconClass = success ? \n  `popup__icon_type_success` :\n  `popup__icon_type_error`\n\n  return (\n    <aside className={popupClass}>\n      <div className=\"popup__container\">\n      <form className=\"popup__form \">\n        <div className={iconClass}></div>\n        <h2 className=\"popup__title\">{message}</h2>\n        <button className=\"popup__exit\" onClick={onClose}></button>\n      </form>\n      </div>\n    </aside>\n  );\n}\n\nexport default InfoTooltip;","class Api {\n    constructor({baseUrl,headers}) {\n      this.baseUrl = baseUrl;\n      this.headers = headers\n    }\n  \n    getInitialCards() {\n      return fetch(`${this.baseUrl}/cards`, {\n        method: \"GET\",\n        headers: this.headers,\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n  \n    getProfile() {\n      return fetch(`${this.baseUrl}/users/me`, {\n        method: \"GET\",\n        headers: this.headers,\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n  \n    updateProfileAvatar(avatar) {\n      return fetch(`${this.baseUrl}/users/me/avatar`, {\n        method: \"PATCH\",\n        headers: this.headers,\n        body: JSON.stringify({\n          avatar\n        }),\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n  \n    updateProfileData({name,about}) {\n      return fetch(`${this.baseUrl}/users/me`, {\n        method: \"PATCH\",\n        headers: this.headers,\n        body: JSON.stringify({\n          name,\n          about\n        }),\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n  \n    postCard({name,link}) {\n      return fetch(`${this.baseUrl}/cards`, {\n        method: \"POST\",\n        headers: this.headers,\n        body: JSON.stringify({\n          name,\n          link\n        }),\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n  \n    deleteCard(cardId) {\n      return fetch(`${this.baseUrl}/cards/${cardId}`, {\n        method: \"DELETE\",\n        headers: this.headers\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n  \n    addLikes(cardId) {\n      return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n        method: \"PUT\",\n        headers: this.headers\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n  \n    deleteLikes(cardId) {\n      return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n        method: \"DELETE\",\n        headers: this.headers\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n      })\n    }\n\n\n    changeLikeCardStatus(cardId, LikeState) {\n       if (LikeState) {\n         return this.addLikes(cardId)\n       } else {\n        return this.deleteLikes(cardId)\n       }\n    }\n  }\n\n  export const api = new Api({\n    baseUrl: \"https://around.nomoreparties.co/v1/group-1\",\n    headers: {\n      authorization: \"8d98f55e-f3f5-4d31-8928-0111e1b03804\",\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  ","class Auth {\n    constructor({baseUrl,headers}) {\n      this.baseUrl = baseUrl;\n      this.headers = headers\n    }\n\n    register(email, password)  {\n      return fetch(`${this.baseUrl}/signup`, {\n        method: 'POST',\n        headers: this.headers,\n        body: JSON.stringify({email, password})\n      })\n      .then((response) => {\n        try {\n          if (response.status === 201){\n            return response.json();\n          }\n        } catch(e){\n            return (e)\n        }\n      })\n      .then((res) => {\n        return res;\n      })\n      .catch((err) => console.log(err));\n    }; \n\n    signin(email, password){\n      return fetch(`${this.baseUrl}/signin`, {\n        method: 'POST',\n        headers: this.headers,\n        body: JSON.stringify({email, password})\n      })\n      .then((response) => {\n        try {\n          if (response.status === 200){\n            return response.json();\n          }\n        } catch(e){\n            return (e)\n        }\n      })\n      .then((res) => {\n        if (res.token) {\n          return res;\n        } else {\n          return Promise.reject(`Error: ${res.status}`);\n        }\n      })\n      .catch((err) => console.log(err));\n    }; \n\n    getContent(token){\n      return fetch(`${this.baseUrl}/users/me`, {\n        method: 'GET',\n        headers: {...this.headers, \"Authorization\" : `Bearer ${token}`} \n      })\n      .then((response) => {\n        try {\n          if (response.status === 200){\n            return response.json();\n          }\n        } catch(e){\n            return (e)\n        }\n      })\n      .then((res) => {\n        return res;     \n      })\n      .catch((err) => console.log(err));\n    }; \n  }\n\n  export const auth = new Auth({\n    baseUrl: \"https://register.nomoreparties.co\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\":\"application/json\"\n    }\n  });\n  ","import React from \"react\";\nimport {\n  Route,\n  Switch,\n  Redirect,\n  useHistory,\n  withRouter \n } from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Main from \"./Main\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { api } from \"../utils/api\";\nimport { auth } from \"../utils/auth\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  \n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(\n    false\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(\n    false\n  );\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState();\n  const [cardId, setCardId] = React.useState();\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setloggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState({data:''});\n  const [token, setToken] = React.useState(localStorage.getItem(\"token\"));\n  const [loginSuccess, setLoginSucces] = React.useState(false);\n  const [showTooltip, setShowTooltip] = React.useState(false);\n  let history = useHistory();\n\n\n\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((res) => {\n        setCards(res.slice(0, 6));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n\n  React.useEffect(() => {\n    if (token) {\n      auth.getContent(token)\n      .then((res) => {       \n        if (res) {\n          const data = {\n            id: res.data._id,\n            email: res.data.email\n          }\n          setloggedIn(true)\n          setUserData({...userData,data})\n         \n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    }\n    // eslint-disable-next-line\n  }, [token]);\n\n  React.useEffect(() => {\n    api\n      .getProfile()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleCardDelete = (cardId) => {\n    api\n      .deleteCard(cardId)\n      .then((res) => {\n        const newCards = cards.filter((c) => (c._id !== cardId ? c : null));\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleAddPlaceClick = (e) => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  };\n\n  const handleEditAvatarClick = (e) => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleDeleteClick = (cardId) => {\n    setIsConfirmPopupOpen(true);\n    setCardId(cardId);\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  };\n  const closeAllPopups = () => {\n    setIsAddPlacePopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsConfirmPopupOpen(false);\n    setSelectedCard(null);\n    setIsImagePopupOpen(false);\n    setShowTooltip(false)\n  };\n\n  const handleAddPlace = (data) => {\n    api\n      .postCard(data)\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleUpdateUser = (profileData) => {\n    api\n      .updateProfileData(profileData)\n      .then((res) => setCurrentUser(res))\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleUpdateAvatar = (data) => {\n    api\n      .updateProfileAvatar(data.avatar)\n      .then((res) => setCurrentUser(res))\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const deleteCard = (e) => {\n    e.preventDefault();\n\n    api\n      .deleteCard(cardId)\n      .then((res) => {\n        setCardId(null);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    closeAllPopups();\n  };\n\n  const handleLogin = (email, password) => {\n    auth.signin(email, password)\n    .then((res) => {\n      if(res){\n        localStorage.setItem('token', res.token);\n        setToken(res.token)\n        setloggedIn(true)\n        history.push('/');\n      } \n    });\n  }\n\n  const handleRegister = (email,password) => {\n    auth.register(email, password)\n    .then((res) => {\n      if(res){\n        setLoginSucces(true)\n        setShowTooltip(true)\n         history.push(\"/signin\");\n      } else {\n        setLoginSucces(false)\n        setShowTooltip(true)\n      }\n    });\n  }\n\n  const handleLogout = () => {\n    setloggedIn(false);\n    setUserData({data:''})\n    localStorage.removeItem(\"token\");\n    history.push(\"/signin\");\n  }\n\n  const confirmProps = {\n    title: \"Are you sure?\",\n    name: \"confirm\",\n    isOpen: isConfirmPopupOpen,\n    onClose: closeAllPopups,\n    buttonText: \"Yes\",\n    disableButton: false,\n    handleSubmit: deleteCard,\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n        <Header email={userData.data.email} onLogout={handleLogout}/>\n        <Switch>\n          <ProtectedRoute exact path=\"/\" loggedIn={loggedIn}>\n            <Main\n              cards={cards}\n              onAddPlace={handleAddPlaceClick}\n              onEditProfile={handleEditProfileClick}\n              onEditAvatar={handleEditAvatarClick}\n              onDelete={handleDeleteClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n            />\n            <Footer />\n            \n            <AddPlacePopup\n              isOpen={isAddPlacePopupOpen}\n              onClose={closeAllPopups}\n              onAddPlace={handleAddPlace}\n            />\n            <EditProfilePopup\n              isOpen={isEditProfilePopupOpen}\n              onClose={closeAllPopups}\n              onUpdateUser={handleUpdateUser}\n            />\n            <EditAvatarPopup\n              isOpen={isEditAvatarPopupOpen}\n              onClose={closeAllPopups}\n              onUpdateAvatar={handleUpdateAvatar}\n            />\n            <PopupWithForm {...confirmProps} />\n            {selectedCard && (\n              <ImagePopup\n                card={selectedCard}\n                onClose={closeAllPopups}\n                isOpen={isImagePopupOpen}\n              />\n            )}\n          </ProtectedRoute>\n          <Route path=\"/signin\">\n              <Login onLogin = {handleLogin}/>\n          </Route>\n          <Route path=\"/signup\">          \n            <Register  onRegister = {handleRegister} />\n          </Route>\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n        </Switch>\n       <InfoTooltip isOpen={showTooltip} success={loginSuccess} onClose={closeAllPopups}/>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default  withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport {\n  BrowserRouter as Router,\n\n \n} from \"react-router-dom\";\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}